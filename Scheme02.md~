# 方案二

以各房型的最大平均满意度$z$为目标函数，以房型$i$的建房套数$x_i, i=1,2,\cdots, 11$为决策变量，建立优化模型。
## 模型建立

### 目标函数
$$
\text{max}\;z=\frac{\sum_{i=1}^{11}r_{i}x_{i}}{\sum_{i=1}^{11}x_{i}}
$$
### 约束条件
#### 容积率约束
$$
\frac{\sum_{i=1}^{8}S_{i}\times x_{i}}{102077.6}\leq 2.28
$$

#### 建房套数约束

$$
x_{i}min\leq x_{i}\leq x_{i}max\quad i=1,2,\ldots ,11
$$

其中，$x_i$为整数。

## 模型求解
Lingo代码如下：
```lingo
model:
!目标函数净收益;
max = 7737*x1+6477*x2+6668*x3+7512*x4+7532*x5+8067*x6+8315*x7+6077*x8+3737*x9+4009*x10+4218*x11;
!套数约束条件;
50<=x1;x1<=450;
50<=x2;x2<=500;
50<=x3;x3<=300;
150<=x4;x4<=500;
100<=x5;x5<=550;
150<=x6;x6<=350;
50<=x7;x7<=450;
100<=x8;x8<=250;
50<=x9;x9<=350;
50<=x10;x10<=400;
50<=x11;x11<=250;
!容积率约束条件;
(x1*77+x2*98+x3*117+x4*145+x5*156+x6*167+x7*178+x8*126)/102077.6<=2.28;
!满意度约束条件;
(0.4*x1+0.6*x2+0.5*x3+0.6*x4+0.7*x5+0.8*x6+0.9*x7+0.6*x8+0.2*x9+0.3*x10+0.4*x11)/(x1+x2+x3+x4+x5+x6+x7+x8+x9+x10+x11)>=0.706;
!整数规划;
@gin(x1);
@gin(x2);
@gin(x3);
@gin(x4);
@gin(x5);
@gin(x6);
@gin(x7);
@gin(x8);
@gin(x9);
@gin(x10);
@gin(x11);
end
```

## 模型评估

### 方案核算

[demo]

### 方案比较
|规划方案| 建房总套数| 总建筑面积| 容积率| 总收益| 前期成本|
|-------|----------|---------|--------|-------|-----|
|方案I |2100| 277025| 2.275229825| 3246720000| 2300720000|
|方案II |1450| 221350| 1.989662766| 2814780000| 2115610000|


|规划方案| 增值税| 净利润| 回报率%| 满意度|
|------|-----|-----|----|----|
|方案I |184782000| 577780000| 25.11| 0.5833333|
|方案II| 97013000| 443130000| 20.95| 0.7068966|
